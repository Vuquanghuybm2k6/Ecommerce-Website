extends ../../layouts/default.pug
include ../../mixins/filter-status.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
block main 
  h1 Danh sách sản phẩm
  .card.mb-3 
    .card-header Bộ lọc và tìm kiếm 
    .card-body 
      .row
        .col-6
          +filter-status(filterStatus)
        .col-6
          +search(keyword)


  .card.mb-3 
    .card-header Danh sách
      .card-body
        +form-change-multi(`${prefixAdmin}/products/change-multi?_method=PATCH`)
        table(
          class = "table table-hover table-sm"
          checkbox-multi
        )
          thead
            tr
              th 
               input(type ="checkbox" name ="checkall")
              th STT
              th Hình ảnh
              th Tiêu đề
              th Giá
              th Trạng thái
              th Hành động
          tbody
            //- Sản phẩm 1
            each item, index in products
              tr
                td
                 input(
                  type = "checkbox"
                  name ="id"
                  value =item.id
                 ) 
                td #{index +1}
                td
                  img(
                    src= item.thumbnail 
                    alt=item.title 
                    width="100px" 
                    height="auto"
                  )
                td #{item.title}
                td #{item.price}$
                td
                  if(item.status == "active")
                    a(
                      href="javascript: ;" 
                      data-status = item.status
                      data-id = item.id
                      button-change-status 
                      class="badge badge-success" ) Hoạt động
                  else
                    //- cái href="javascript: ;" để máy hiểu rằng ta đang bắt sự kiện bằng javascript 
                    a(
                      href="javascript: ;" 
                      data-status = item.status
                      data-id = item.id
                      button-change-status 
                      class="badge badge-danger") Dừng hoạt động
                td
                  //- dùng bootstrap để css cho các nút
                  button(class="btn btn-warning btn-sm") Sửa
                  button(class="btn btn-danger btn-sm ml-1") Xóa
  +pagination(pagination)
  //- trong cái html(pug) thì chỉ có 2 phương thức là get hoặc post thôi, muốn có thêm thì cài npm i method-override để ghi đè
  //- nếu trong cái file product.js ở folder public là phương thức PATCH thì ở đây luôn phải để là POST
  form(
    action = ``
    method ="POST"
    id = "form-change-status"
    data-path = `${prefixAdmin}/products/change-status`
    )

  script(src ="/admin/js/product.js")
